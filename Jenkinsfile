{"payload":{"allShortcutsEnabled":false,"fileTree":{"":{"items":[{"name":".vagrant","path":".vagrant","contentType":"directory"},{"name":"Jenkins","path":"Jenkins","contentType":"directory"},{"name":"ansible","path":"ansible","contentType":"directory"},{"name":"db","path":"db","contentType":"directory"},{"name":"manifests","path":"manifests","contentType":"directory"},{"name":"nginx","path":"nginx","contentType":"directory"},{"name":"web","path":"web","contentType":"directory"},{"name":".gitignore","path":".gitignore","contentType":"file"},{"name":"Dockerfiledb","path":"Dockerfiledb","contentType":"file"},{"name":"Dockerfilenginx","path":"Dockerfilenginx","contentType":"file"},{"name":"Dockerfileweb","path":"Dockerfileweb","contentType":"file"},{"name":"Jenkinsfile","path":"Jenkinsfile","contentType":"file"},{"name":"Jenkinsfileweb","path":"Jenkinsfileweb","contentType":"file"},{"name":"Vagrantfile","path":"Vagrantfile","contentType":"file"},{"name":"dash-service.yaml","path":"dash-service.yaml","contentType":"file"},{"name":"docker-compose.yml","path":"docker-compose.yml","contentType":"file"},{"name":"hosts","path":"hosts","contentType":"file"},{"name":"installjenkins.yml","path":"installjenkins.yml","contentType":"file"},{"name":"kub-dash.yaml","path":"kub-dash.yaml","contentType":"file"},{"name":"passwd","path":"passwd","contentType":"file"},{"name":"playbook.yml","path":"playbook.yml","contentType":"file"},{"name":"script.sh","path":"script.sh","contentType":"file"},{"name":"shadow","path":"shadow","contentType":"file"}],"ttalCont":22}},"fileTreeProcessingTime":8.501566,"foldersToFetch":[],"reducedMotionEnabled":null,"repo":{"id":677583892,"defaultBranch":"master","name":"devops0723","ownerLogin":"rogerramossilva","currentUserCanPush":false,"isFork":false,"isEmpty":false,"createdAt":"2023-08-12T01:10:13.000Z","ownerAvatar":"https://avatars.githubusercontent.com/u/33642941?v=4","public":true,"private":false,"isOrgOwned":false},"symbolsExpanded":false,"treeExpanded":true,"refInfo":{"name":"master","listCacheKey":"v0:1691802766.0","canEdit":false,"refType":"branch","currentOid":"4272b395027413efdb350a0afcb880be81b2fe16"},"path":"Jenkinsfile","currentUser":null,"blob":{"rawLines":["pipeline {","    agent any","    environment {","        DOCKERFILE_WEB = 'Dockerfileweb'       // Nome do Dockerfile para a imagem web","        DOCKERFILE_DB = 'Dockerfiledb'         // Nome do Dockerfile para a imagem db","        DOCKERFILE_NGINX = 'Dockerfilenginx'   // Nome do Dockerfile para a imagem nginx","        DOCKER_IMAGE_TAG = 'latest'            // Tag da imagem Docker a ser construída","    }","    stages {","","        stage('Build Images') {","            steps {","                script {","                    // Nome das imagens","                    def imageNameWeb = 'rogerramossilva/web'","                    def imageNameDB = 'rogerramossilva/db'","                    def imageNameNginx = 'rogerramossilva/nginx'","","                    // Executa o build das imagens com os respectivos Dockerfiles","                    docker.withRegistry('https://registry.hub.docker.com', 'dockerhubrogerio') {","                        def webImage = docker.build(\"${imageNameWeb}:${DOCKER_IMAGE_TAG}\", \"-f ${DOCKERFILE_WEB} .\")","                        def dbImage = docker.build(\"${imageNameDB}:${DOCKER_IMAGE_TAG}\", \"-f ${DOCKERFILE_DB} .\")","                        def nginxImage = docker.build(\"${imageNameNginx}:${DOCKER_IMAGE_TAG}\", \"-f ${DOCKERFILE_NGINX} .\")","","                        webImage.push()","                        dbImage.push()","                        nginxImage.push()","                    }","                }","            }","        }","        stage('Teste Aplicação') {","            steps {","                // Testes automatizados da aplicação","                sh 'docker-compose -f docker-compose.yml up -d'","","                // Realize os testes nos serviços em execução","                // Exemplo de teste usando curl para verificar se o serviço web está respondendo","                sh 'curl -I http://localhost'","","                sh 'docker-compose -f docker-compose.yml down'","            }","        }","        stage('Aprovação') {","            steps {","                input 'Deseja prosseguir com o Deploy e Push?'","            }","        }",""," }","}"],"stylingDirectives":[[],[],[],[{"start":8,"end":22,"cssClass":"pl-c1"},{"start":23,"end":24,"cssClass":"pl-k"},{"start":25,"end":40,"cssClass":"pl-s"},{"start":25,"end":26,"cssClass":"pl-pds"},{"start":39,"end":40,"cssClass":"pl-pds"},{"start":47,"end":86,"cssClass":"pl-c"},{"start":47,"end":49,"cssClass":"pl-c"}],[{"start":8,"end":21,"cssClass":"pl-c1"},{"start":22,"end":23,"cssClass":"pl-k"},{"start":24,"end":38,"cssClass":"pl-s"},{"start":24,"end":25,"cssClass":"pl-pds"},{"start":37,"end":38,"cssClass":"pl-pds"},{"start":47,"end":85,"cssClass":"pl-c"},{"start":47,"end":49,"cssClass":"pl-c"}],[{"start":8,"end":24,"cssClass":"pl-c1"},{"start":25,"end":26,"cssClass":"pl-k"},{"start":27,"end":44,"cssClass":"pl-s"},{"start":27,"end":28,"cssClass":"pl-pds"},{"start":43,"end":44,"cssClass":"pl-pds"},{"start":47,"end":88,"cssClass":"pl-c"},{"start":47,"end":49,"cssClass":"pl-c"}],[{"start":8,"end":24,"cssClass":"pl-c1"},{"start":25,"end":26,"cssClass":"pl-k"},{"start":27,"end":35,"cssClass":"pl-s"},{"start":27,"end":28,"cssClass":"pl-pds"},{"start":34,"end":35,"cssClass":"pl-pds"},{"start":47,"end":87,"cssClass":"pl-c"},{"start":47,"end":49,"cssClass":"pl-c"}],[],[],[],[{"start":14,"end":28,"cssClass":"pl-s"},{"start":14,"end":15,"cssClass":"pl-pds"},{"start":27,"end":28,"cssClass":"pl-pds"}],[],[],[{"start":20,"end":39,"cssClass":"pl-c"},{"start":20,"end":22,"cssClass":"pl-c"}],[{"start":20,"end":23,"cssClass":"pl-k"},{"start":37,"end":38,"cssClass":"pl-k"},{"start":39,"end":60,"cssClass":"pl-s"},{"start":39,"end":40,"cssClass":"pl-pds"},{"start":59,"end":60,"cssClass":"pl-pds"}],[{"start":20,"end":23,"cssClass":"pl-k"},{"start":36,"end":37,"cssClass":"pl-k"},{"start":38,"end":58,"cssClass":"pl-s"},{"start":38,"end":39,"cssClass":"pl-pds"},{"start":57,"end":58,"cssClass":"pl-pds"}],[{"start":20,"end":23,"cssClass":"pl-k"},{"start":39,"end":40,"cssClass":"pl-k"},{"start":41,"end":64,"cssClass":"pl-s"},{"start":41,"end":42,"cssClass":"pl-pds"},{"start":63,"end":64,"cssClass":"pl-pds"}],[],[{"start":20,"end":81,"cssClass":"pl-c"},{"start":20,"end":22,"cssClass":"pl-c"}],[{"start":26,"end":27,"cssClass":"pl-k"},{"start":40,"end":73,"cssClass":"pl-s"},{"start":40,"end":41,"cssClass":"pl-pds"},{"start":72,"end":73,"cssClass":"pl-pds"},{"start":75,"end":93,"cssClass":"pl-s"},{"start":75,"end":76,"cssClass":"pl-pds"},{"start":92,"end":93,"cssClass":"pl-pds"}],[{"start":24,"end":27,"cssClass":"pl-k"},{"start":37,"end":38,"cssClass":"pl-k"},{"start":45,"end":46,"cssClass":"pl-k"},{"start":52,"end":89,"cssClass":"pl-s"},{"start":52,"end":53,"cssClass":"pl-pds"},{"start":53,"end":68,"cssClass":"pl-s1"},{"start":53,"end":55,"cssClass":"pl-pse"},{"start":67,"end":68,"cssClass":"pl-pse"},{"start":69,"end":88,"cssClass":"pl-s1"},{"start":69,"end":71,"cssClass":"pl-pse"},{"start":87,"end":88,"cssClass":"pl-pse"},{"start":88,"end":89,"cssClass":"pl-pds"},{"start":91,"end":115,"cssClass":"pl-s"},{"start":91,"end":92,"cssClass":"pl-pds"},{"start":95,"end":112,"cssClass":"pl-s1"},{"start":95,"end":97,"cssClass":"pl-pse"},{"start":111,"end":112,"cssClass":"pl-pse"},{"start":114,"end":115,"cssClass":"pl-pds"}],[{"start":24,"end":27,"cssClass":"pl-k"},{"start":36,"end":37,"cssClass":"pl-k"},{"start":44,"end":45,"cssClass":"pl-k"},{"start":51,"end":87,"cssClass":"pl-s"},{"start":51,"end":52,"cssClass":"pl-pds"},{"start":52,"end":66,"cssClass":"pl-s1"},{"start":52,"end":54,"cssClass":"pl-pse"},{"start":65,"end":66,"cssClass":"pl-pse"},{"start":67,"end":86,"cssClass":"pl-s1"},{"start":67,"end":69,"cssClass":"pl-pse"},{"start":85,"end":86,"cssClass":"pl-pse"},{"start":86,"end":87,"cssClass":"pl-pds"},{"start":89,"end":112,"cssClass":"pl-s"},{"start":89,"end":90,"cssClass":"pl-pds"},{"start":93,"end":109,"cssClass":"pl-s1"},{"start":93,"end":95,"cssClass":"pl-pse"},{"start":108,"end":109,"cssClass":"pl-pse"},{"start":111,"end":112,"cssClass":"pl-pds"}],[{"start":24,"end":27,"cssClass":"pl-k"},{"start":39,"end":40,"cssClass":"pl-k"},{"start":47,"end":48,"cssClass":"pl-k"},{"start":54,"end":93,"cssClass":"pl-s"},{"start":54,"end":55,"cssClass":"pl-pds"},{"start":55,"end":72,"cssClass":"pl-s1"},{"start":55,"end":57,"cssClass":"pl-pse"},{"start":71,"end":72,"cssClass":"pl-pse"},{"start":73,"end":92,"cssClass":"pl-s1"},{"start":73,"end":75,"cssClass":"pl-pse"},{"start":91,"end":92,"cssClass":"pl-pse"},{"start":92,"end":93,"cssClass":"pl-pds"},{"start":95,"end":121,"cssClass":"pl-s"},{"start":95,"end":96,"cssClass":"pl-pds"},{"start":99,"end":118,"cssClass":"pl-s1"},{"start":99,"end":101,"cssClass":"pl-pse"},{"start":117,"end":118,"cssClass":"pl-pse"},{"start":120,"end":121,"cssClass":"pl-pds"}],[],[{"start":32,"end":33,"cssClass":"pl-k"}],[{"start":31,"end":32,"cssClass":"pl-k"}],[{"start":34,"end":35,"cssClass":"pl-k"}],[],[],[],[],[{"start":14,"end":31,"cssClass":"pl-s"},{"start":14,"end":15,"cssClass":"pl-pds"},{"start":30,"end":31,"cssClass":"pl-pds"}],[],[{"start":16,"end":52,"cssClass":"pl-c"},{"start":16,"end":18,"cssClass":"pl-c"}],[{"start":19,"end":63,"cssClass":"pl-s"},{"start":19,"end":20,"cssClass":"pl-pds"},{"start":62,"end":63,"cssClass":"pl-pds"}],[],[{"start":16,"end":61,"cssClass":"pl-c"},{"start":16,"end":18,"cssClass":"pl-c"}],[{"start":16,"end":96,"cssClass":"pl-c"},{"start":16,"end":18,"cssClass":"pl-c"}],[{"start":19,"end":45,"cssClass":"pl-s"},{"start":19,"end":20,"cssClass":"pl-pds"},{"start":44,"end":45,"cssClass":"pl-pds"}],[],[{"start":19,"end":62,"cssClass":"pl-s"},{"start":19,"end":20,"cssClass":"pl-pds"},{"start":61,"end":62,"cssClass":"pl-pds"}],[],[],[{"start":14,"end":25,"cssClass":"pl-s"},{"start":14,"end":15,"cssClass":"pl-pds"},{"start":24,"end":25,"cssClass":"pl-pds"}],[],[{"start":22,"end":62,"cssClass":"pl-s"},{"start":22,"end":23,"cssClass":"pl-pds"},{"start":61,"end":62,"cssClass":"pl-pds"}],[],[],[],[],[]],"csv":null,"csvError":null,"dependabotInfo":{"showConfigurationBanner":false,"configFilePath":null,"networkDependabotPath":"/rogerramossilva/devops0723/network/updates","dismissConfigurationNoticePath":"/settings/dismiss-notice/dependabot_configuration_notice","configurationNoticeDismissed":null,"repoAlertsPath":"/rogerramossilva/devops0723/security/dependabot","repoSecurityAndAnalysisPath":"/rogerramossilva/devops0723/settings/security_analysis","repoOwnerIsOrg":false,"currentUserCanAdminRepo":false},"displayName":"Jenkinsfile","displayUrl":"https://github.com/rogerramossilva/devops0723/blob/master/Jenkinsfile?raw=true","headerInfo":{"blobSize":"2.01 KB","deleteInfo":{"deleteTooltip":"You must be signed in to make or propose changes"},"editInfo":{"editTooltip":"You must be signed in to make or propose changes"},"ghDesktopPath":"https://desktop.github.com","gitLfsPath":null,"onBranch":true,"shortPath":"ac26626","siteNavLoginPath":"/login?return_to=https%3A%2F%2Fgithub.com%2Frogerramossilva%2Fdevops0723%2Fblob%2Fmaster%2FJenkinsfile","isCSV":false,"isRichtext":false,"toc":null,"lineInfo":{"truncatedLoc":"51","truncatedSloc":"45"},"mode":"file"},"image":false,"isCodeownersFile":null,"isPlain":false,"isValidLegacyIssueTemplate":false,"issueTemplateHelpUrl":"https://docs.github.com/articles/about-issue-and-pull-request-templates","issueTemplate":null,"discussionTemplate":null,"language":"Groovy","languageID":142,"large":false,"loggedIn":false,"newDiscussionPath":"/rogerramossilva/devops0723/discussions/new","newIssuePath":"/rogerramossilva/devops0723/issues/new","planSupportInfo":{"repoIsFork":null,"repoOwnedByCurrentUser":null,"requestFullPath":"/rogerramossilva/devops0723/blob/master/Jenkinsfile","showFreeOrgGatedFeatureMessage":null,"showPlanSupportBanner":null,"upgradeDataAttributes":null,"upgradePath":null},"publishBannersInfo":{"dismissActionNoticePath":"/settings/dismiss-notice/publish_action_from_dockerfile","dismissStackNoticePath":"/settings/dismiss-notice/publish_stack_from_file","releasePath":"/rogerramossilva/devops0723/releases/new?marketplace=true","showPublishActionBanner":false,"showPublishStackBanner":false},"rawBlobUrl":"https://github.com/rogerramossilva/devops0723/raw/master/Jenkinsfile","renderImageOrRaw":false,"richText":null,"renderedFileInfo":null,"shortPath":null,"tabSize":8,"topBannersInfo":{"overridingGlobalFundingFile":false,"globalPreferredFundingPath":null,"repoOwner":"rogerramossilva","repoName":"devops0723","showInvalidCitationWarning":false,"citationHelpUrl":"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-citation-files","showDependabotConfigurationBanner":false,"actionsOnboardingTip":null},"truncated":false,"viewable":true,"workflowRedirectUrl":null,"symbols":{"timedOut":false,"notAnalyzed":true,"symbols":[]}},"copilotInfo":null,"copilotAccessAllowed":false,"csrf_tokens":{"/rogerramossilva/devops0723/branches":{"post":"Waaigmm_p8kb92Iml--xquGC97tHqJNqb98lHbJMNVUkGZ-BBOBSxxgTHCtMHeKUnrFq_o8XLbl4OxU-mjSfzA"},"/repos/preferences":{"post":"O9BNmp_tcUoJnGfTwgCQN9xfcR5JC62xGnk86OTxMmgSJxfEg8DLhxfmkrKNVv-BuJKvMFh2CTVlnt23kQayCA"}}},"title":"devops0723/Jenkinsfile at master · rogerramossilva/devops0723"}
